"use strict";(self.webpackChunkaastreli_frontend=self.webpackChunkaastreli_frontend||[]).push([[641],{1641(e,a,t){t.r(a),t.d(a,{default:()=>ce});var o=t(5043),n=t(9252),r=t(6446),i=t(5865),l=t(547),s=t(3845),c=t(1906),d=t(1637),u=t(9650),p=t(3336),h=t(1806),m=t(4882),g=t(8076),v=t(39),b=t(1962),x=t(3460),f=t(8168),A=t(8587),y=t(8387),_=t(8610),j=t(8206),k=t(2532),C=t(2372);function S(e){return(0,C.Ay)("MuiPagination",e)}(0,k.A)("MuiPagination",["root","ul","outlined","text"]);var w=t(1052);const z=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];var P=t(7266),B=t(875);function R(e){return(0,C.Ay)("MuiPaginationItem",e)}const F=(0,k.A)("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]);var N=t(6236),M=t(6803),I=t(9662),L=t(579);const O=(0,I.A)((0,L.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),D=(0,I.A)((0,L.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),W=(0,I.A)((0,L.jsx)("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),E=(0,I.A)((0,L.jsx)("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");var V=t(4535);const T=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],H=(e,a)=>{const{ownerState:t}=e;return[a.root,a[t.variant],a["size".concat((0,M.A)(t.size))],"text"===t.variant&&a["text".concat((0,M.A)(t.color))],"outlined"===t.variant&&a["outlined".concat((0,M.A)(t.color))],"rounded"===t.shape&&a.rounded,"page"===t.type&&a.page,("start-ellipsis"===t.type||"end-ellipsis"===t.type)&&a.ellipsis,("previous"===t.type||"next"===t.type)&&a.previousNext,("first"===t.type||"last"===t.type)&&a.firstLast]},X=(0,V.Ay)("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:H})(e=>{let{theme:a,ownerState:t}=e;return(0,f.A)({},a.typography.body2,{borderRadius:16,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(a.vars||a).palette.text.primary,height:"auto",["&.".concat(F.disabled)]:{opacity:(a.vars||a).palette.action.disabledOpacity}},"small"===t.size&&{minWidth:26,borderRadius:13,margin:"0 1px",padding:"0 4px"},"large"===t.size&&{minWidth:40,borderRadius:20,padding:"0 10px",fontSize:a.typography.pxToRem(15)})}),q=(0,V.Ay)(N.A,{name:"MuiPaginationItem",slot:"Root",overridesResolver:H})(e=>{let{theme:a,ownerState:t}=e;return(0,f.A)({},a.typography.body2,{borderRadius:16,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(a.vars||a).palette.text.primary,["&.".concat(F.focusVisible)]:{backgroundColor:(a.vars||a).palette.action.focus},["&.".concat(F.disabled)]:{opacity:(a.vars||a).palette.action.disabledOpacity},transition:a.transitions.create(["color","background-color"],{duration:a.transitions.duration.short}),"&:hover":{backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(F.selected)]:{backgroundColor:(a.vars||a).palette.action.selected,"&:hover":{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.action.selectedChannel," / calc(").concat(a.vars.palette.action.selectedOpacity," + ").concat(a.vars.palette.action.hoverOpacity,"))"):(0,P.X4)(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(a.vars||a).palette.action.selected}},["&.".concat(F.focusVisible)]:{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.action.selectedChannel," / calc(").concat(a.vars.palette.action.selectedOpacity," + ").concat(a.vars.palette.action.focusOpacity,"))"):(0,P.X4)(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)},["&.".concat(F.disabled)]:{opacity:1,color:(a.vars||a).palette.action.disabled,backgroundColor:(a.vars||a).palette.action.selected}}},"small"===t.size&&{minWidth:26,height:26,borderRadius:13,margin:"0 1px",padding:"0 4px"},"large"===t.size&&{minWidth:40,height:40,borderRadius:20,padding:"0 10px",fontSize:a.typography.pxToRem(15)},"rounded"===t.shape&&{borderRadius:(a.vars||a).shape.borderRadius})},e=>{let{theme:a,ownerState:t}=e;return(0,f.A)({},"text"===t.variant&&{["&.".concat(F.selected)]:(0,f.A)({},"standard"!==t.color&&{color:(a.vars||a).palette[t.color].contrastText,backgroundColor:(a.vars||a).palette[t.color].main,"&:hover":{backgroundColor:(a.vars||a).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(a.vars||a).palette[t.color].main}},["&.".concat(F.focusVisible)]:{backgroundColor:(a.vars||a).palette[t.color].dark}},{["&.".concat(F.disabled)]:{color:(a.vars||a).palette.action.disabled}})},"outlined"===t.variant&&{border:a.vars?"1px solid rgba(".concat(a.vars.palette.common.onBackgroundChannel," / 0.23)"):"1px solid ".concat("light"===a.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),["&.".concat(F.selected)]:(0,f.A)({},"standard"!==t.color&&{color:(a.vars||a).palette[t.color].main,border:"1px solid ".concat(a.vars?"rgba(".concat(a.vars.palette[t.color].mainChannel," / 0.5)"):(0,P.X4)(a.palette[t.color].main,.5)),backgroundColor:a.vars?"rgba(".concat(a.vars.palette[t.color].mainChannel," / ").concat(a.vars.palette.action.activatedOpacity,")"):(0,P.X4)(a.palette[t.color].main,a.palette.action.activatedOpacity),"&:hover":{backgroundColor:a.vars?"rgba(".concat(a.vars.palette[t.color].mainChannel," / calc(").concat(a.vars.palette.action.activatedOpacity," + ").concat(a.vars.palette.action.focusOpacity,"))"):(0,P.X4)(a.palette[t.color].main,a.palette.action.activatedOpacity+a.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(F.focusVisible)]:{backgroundColor:a.vars?"rgba(".concat(a.vars.palette[t.color].mainChannel," / calc(").concat(a.vars.palette.action.activatedOpacity," + ").concat(a.vars.palette.action.focusOpacity,"))"):(0,P.X4)(a.palette[t.color].main,a.palette.action.activatedOpacity+a.palette.action.focusOpacity)}},{["&.".concat(F.disabled)]:{borderColor:(a.vars||a).palette.action.disabledBackground,color:(a.vars||a).palette.action.disabled}})})}),G=(0,V.Ay)("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,a)=>a.icon})(e=>{let{theme:a,ownerState:t}=e;return(0,f.A)({fontSize:a.typography.pxToRem(20),margin:"0 -8px"},"small"===t.size&&{fontSize:a.typography.pxToRem(18)},"large"===t.size&&{fontSize:a.typography.pxToRem(22)})}),U=o.forwardRef(function(e,a){const t=(0,j.b)({props:e,name:"MuiPaginationItem"}),{className:o,color:n="standard",component:r,components:i={},disabled:l=!1,page:s,selected:c=!1,shape:d="circular",size:u="medium",slots:p={},type:h="page",variant:m="text"}=t,g=(0,A.A)(t,T),v=(0,f.A)({},t,{color:n,disabled:l,selected:c,shape:d,size:u,type:h,variant:m}),b=(0,B.I)(),x=(e=>{const{classes:a,color:t,disabled:o,selected:n,size:r,shape:i,type:l,variant:s}=e,c={root:["root","size".concat((0,M.A)(r)),s,i,"standard"!==t&&"color".concat((0,M.A)(t)),"standard"!==t&&"".concat(s).concat((0,M.A)(t)),o&&"disabled",n&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[l]],icon:["icon"]};return(0,_.A)(c,R,a)})(v),k=(b?{previous:p.next||i.next||E,next:p.previous||i.previous||W,last:p.first||i.first||O,first:p.last||i.last||D}:{previous:p.previous||i.previous||W,next:p.next||i.next||E,first:p.first||i.first||O,last:p.last||i.last||D})[h];return"start-ellipsis"===h||"end-ellipsis"===h?(0,L.jsx)(X,{ref:a,ownerState:v,className:(0,y.A)(x.root,o),children:"\u2026"}):(0,L.jsxs)(q,(0,f.A)({ref:a,ownerState:v,component:r,disabled:l,className:(0,y.A)(x.root,o)},g,{children:["page"===h&&s,k?(0,L.jsx)(G,{as:k,ownerState:v,className:x.icon}):null]}))}),J=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],K=(0,V.Ay)("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:t}=e;return[a.root,a[t.variant]]}})({}),Y=(0,V.Ay)("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,a)=>a.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function Q(e,a,t){return"page"===e?"".concat(t?"":"Go to ","page ").concat(a):"Go to ".concat(e," page")}const Z=o.forwardRef(function(e,a){const t=(0,j.b)({props:e,name:"MuiPagination"}),{boundaryCount:o=1,className:n,color:r="standard",count:i=1,defaultPage:l=1,disabled:s=!1,getItemAriaLabel:c=Q,hideNextButton:d=!1,hidePrevButton:u=!1,renderItem:p=e=>(0,L.jsx)(U,(0,f.A)({},e)),shape:h="circular",showFirstButton:m=!1,showLastButton:g=!1,siblingCount:v=1,size:b="medium",variant:x="text"}=t,k=(0,A.A)(t,J),{items:C}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{boundaryCount:a=1,componentName:t="usePagination",count:o=1,defaultPage:n=1,disabled:r=!1,hideNextButton:i=!1,hidePrevButton:l=!1,onChange:s,page:c,showFirstButton:d=!1,showLastButton:u=!1,siblingCount:p=1}=e,h=(0,A.A)(e,z),[m,g]=(0,w.A)({controlled:c,default:n,name:t,state:"page"}),v=(e,a)=>{c||g(a),s&&s(e,a)},b=(e,a)=>{const t=a-e+1;return Array.from({length:t},(a,t)=>e+t)},x=b(1,Math.min(a,o)),y=b(Math.max(o-a+1,a+1),o),_=Math.max(Math.min(m-p,o-a-2*p-1),a+2),j=Math.min(Math.max(m+p,a+2*p+2),y.length>0?y[0]-2:o-1),k=[...d?["first"]:[],...l?[]:["previous"],...x,..._>a+2?["start-ellipsis"]:a+1<o-a?[a+1]:[],...b(_,j),...j<o-a-1?["end-ellipsis"]:o-a>a?[o-a]:[],...y,...i?[]:["next"],...u?["last"]:[]],C=e=>{switch(e){case"first":return 1;case"previous":return m-1;case"next":return m+1;case"last":return o;default:return null}},S=k.map(e=>"number"===typeof e?{onClick:a=>{v(a,e)},type:"page",page:e,selected:e===m,disabled:r,"aria-current":e===m?"true":void 0}:{onClick:a=>{v(a,C(e))},type:e,page:C(e),selected:!1,disabled:r||-1===e.indexOf("ellipsis")&&("next"===e||"last"===e?m>=o:m<=1)});return(0,f.A)({items:S},h)}((0,f.A)({},t,{componentName:"Pagination"})),P=(0,f.A)({},t,{boundaryCount:o,color:r,count:i,defaultPage:l,disabled:s,getItemAriaLabel:c,hideNextButton:d,hidePrevButton:u,renderItem:p,shape:h,showFirstButton:m,showLastButton:g,siblingCount:v,size:b,variant:x}),B=(e=>{const{classes:a,variant:t}=e,o={root:["root",t],ul:["ul"]};return(0,_.A)(o,S,a)})(P);return(0,L.jsx)(K,(0,f.A)({"aria-label":"pagination navigation",className:(0,y.A)(B.root,n),ownerState:P,ref:a},k,{children:(0,L.jsx)(Y,{className:B.ul,ownerState:P,children:C.map((e,a)=>(0,L.jsx)("li",{children:p((0,f.A)({},e,{color:r,"aria-label":c(e.type,e.page,e.selected),shape:h,size:b,variant:x}))},a))})}))}),$=Z;var ee=t(35),ae=t(6600),te=t(5316),oe=t(5795),ne=t(2143),re=t(9347),ie=t(5054),le=t(6624);const se=[{value:"normal",label:"Normal (No Fault)"},{value:"pump_bearing_cage_defect",label:"Pump Bearing Cage Defect"},{value:"hydraulic_pulsation_resonance",label:"Hydraulic Pulsation Resonance"},{value:"bearing_overgrease_churn",label:"Bearing Overgrease Churn"},{value:"check_valve_flutter_proxy",label:"Check Valve Flutter Proxy"},{value:"data_dropout",label:"Data Dropout"},{value:"loss_of_prime_dry_run_proxy",label:"Loss of Prime Dry Run Proxy"},{value:"impeller_damage",label:"Impeller Damage"},{value:"belt_slip_or_drive_issue",label:"Belt Slip or Drive Issue"},{value:"suction_strainer_plugging",label:"Suction Strainer Plugging"},{value:"bearing_fit_tight_preload",label:"Bearing Fit Tight Preload"},{value:"rotor_bar_crack_proxy",label:"Rotor Bar Crack Proxy"},{value:"internal_rub_proxy",label:"Internal Rub Proxy"},{value:"seal_flush_failure_proxy",label:"Seal Flush Failure Proxy"},{value:"phase_unbalance",label:"Phase Unbalance"},{value:"lube_contamination_water",label:"Lube Contamination Water"},{value:"stuck_sensor_flatline",label:"Stuck Sensor Flatline"},{value:"piping_strain",label:"Piping Strain"},{value:"sensor_drift_bias",label:"Sensor Drift Bias"},{value:"instrument_scaling_error",label:"Instrument Scaling Error"},{value:"fan_blade_damage",label:"Fan Blade Damage"},{value:"coupling_wear",label:"Coupling Wear"},{value:"discharge_restriction",label:"Discharge Restriction"},{value:"power_frequency_variation",label:"Power Frequency Variation"},{value:"wear_ring_clearance",label:"Wear Ring Clearance"},{value:"foundation_grout_degradation",label:"Foundation Grout Degradation"},{value:"shaft_bow_proxy",label:"Shaft Bow Proxy"},{value:"bearing_fit_loose_housing",label:"Bearing Fit Loose Housing"},{value:"loose_hub_keyway",label:"Loose Hub Keyway"},{value:"air_gas_ingress",label:"Air Gas Ingress"},{value:"cooling_failure",label:"Cooling Failure"},{value:"blower_aero_stall_surge_proxy",label:"Blower Aero Stall Surge Proxy"},{value:"electrical_fluting",label:"Electrical Fluting"},{value:"seal_face_distress_proxy",label:"Seal Face Distress Proxy"}];function ce(){const{tenantVersion:e}=(0,le.n8)(),[a,t]=(0,o.useState)([]),[f,A]=(0,o.useState)(new Set),[y,_]=(0,o.useState)(!1),[j,k]=(0,o.useState)("normal"),[C,S]=(0,o.useState)(""),[w,z]=(0,o.useState)(!1),[P,B]=(0,o.useState)(null),[R,F]=(0,o.useState)(!0),[N,M]=(0,o.useState)(!1),[I,O]=(0,o.useState)(1),[D,W]=(0,o.useState)(1);(0,o.useEffect)(()=>{E()},[I,e]);const E=async()=>{try{F(!0);const e=await ie.Ay.get("/sensor-readings",{params:{skip:50*(I-1),limit:50}});t(e.data.readings),W(Math.ceil(e.data.total/50)),F(!1)}catch(e){console.error("Error fetching readings:",e),B("Failed to load sensor readings"),F(!1)}},V=(e,a)=>{a&&a.stopPropagation();const t=new Set(f);t.has(e)?t.delete(e):t.add(e),A(t)},T=()=>{_(!1),k("normal"),S("")},H=e=>null!=e?e.toFixed(2):"N/A";return(0,L.jsxs)(n.A,{maxWidth:"xl",sx:{mt:4,mb:4},children:[(0,L.jsxs)(r.A,{sx:{mb:3},children:[(0,L.jsx)(i.A,{variant:"h4",gutterBottom:!0,children:"Sensor Data Feedback & Anomalies"}),(0,L.jsx)(i.A,{variant:"body1",color:"text.secondary",children:"Review predictions and anomalies. Select readings to provide feedback for model improvement."})]}),w&&(0,L.jsx)(l.A,{severity:"success",sx:{mb:2},onClose:()=>z(!1),children:"Feedback submitted successfully! The model will be updated in the next training cycle."}),P&&(0,L.jsx)(l.A,{severity:"error",sx:{mb:2},onClose:()=>B(null),children:P}),(0,L.jsxs)(r.A,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2},children:[(0,L.jsxs)(r.A,{sx:{display:"flex",gap:2,alignItems:"center"},children:[(0,L.jsx)(s.A,{label:"".concat(f.size," selected"),color:f.size>0?"primary":"default"}),(0,L.jsx)(s.A,{label:"".concat(a.filter(e=>e.prediction&&"normal"!==e.prediction.toLowerCase()).length," anomalies"),color:"warning"}),(0,L.jsx)(s.A,{label:"".concat(a.filter(e=>!0===e.has_feedback).length," with feedback"),color:"success"})]}),(0,L.jsx)(c.A,{variant:"contained",color:"primary",onClick:()=>{0!==f.size?_(!0):B("Please select at least one reading")},disabled:0===f.size,children:"Submit Feedback for Selected"})]}),R?(0,L.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,L.jsx)(d.A,{})}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(u.A,{component:p.A,children:(0,L.jsxs)(h.A,{size:"small",children:[(0,L.jsx)(m.A,{children:(0,L.jsxs)(g.A,{children:[(0,L.jsx)(v.A,{padding:"checkbox",children:(0,L.jsx)(b.A,{indeterminate:f.size>0&&f.size<a.length,checked:a.length>0&&f.size===a.length,onChange:e=>{e.target.checked?A(new Set(a.map(e=>e._id))):A(new Set)}})}),(0,L.jsx)(v.A,{children:(0,L.jsx)("strong",{children:"Sensor ID"})}),(0,L.jsx)(v.A,{children:(0,L.jsx)("strong",{children:"Timestamp"})}),(0,L.jsx)(v.A,{children:(0,L.jsx)("strong",{children:"Motor Temp"})}),(0,L.jsx)(v.A,{children:(0,L.jsx)("strong",{children:"Motor Vib"})}),(0,L.jsx)(v.A,{children:(0,L.jsx)("strong",{children:"Pump Temp"})}),(0,L.jsx)(v.A,{children:(0,L.jsx)("strong",{children:"Pump Ultra"})}),(0,L.jsx)(v.A,{children:(0,L.jsx)("strong",{children:"ML Prediction"})}),(0,L.jsx)(v.A,{children:(0,L.jsx)("strong",{children:"Confidence"})}),(0,L.jsx)(v.A,{children:(0,L.jsx)("strong",{children:"Feedback"})})]})}),(0,L.jsx)(x.A,{children:a.map(e=>{var a,t,o,n,r,i,l,c;const d=e.prediction&&"normal"!==e.prediction.toLowerCase(),u=null!==(a=null!==(t=null===(o=e.motor_data)||void 0===o?void 0:o.DE_temp)&&void 0!==t?t:e.temperature)&&void 0!==a?a:null,p=null!==(n=e.vibration)&&void 0!==n?n:null,h=null!==(r=null===(i=e.pump_data)||void 0===i?void 0:i.DE_temp)&&void 0!==r?r:null,m=null!==(l=null===(c=e.pump_data)||void 0===c?void 0:c.DE_ultra)&&void 0!==l?l:null;return(0,L.jsxs)(g.A,{hover:!0,onClick:()=>V(e._id),selected:f.has(e._id),sx:{cursor:"pointer",bgcolor:d?"warning.light":"inherit","&:hover":{bgcolor:d?"warning.main":"action.hover"}},children:[(0,L.jsx)(v.A,{padding:"checkbox",children:(0,L.jsx)(b.A,{checked:f.has(e._id),onChange:a=>{a.stopPropagation(),V(e._id)}})}),(0,L.jsxs)(v.A,{children:[e.sensor_id,d&&(0,L.jsx)(s.A,{label:"ANOMALY",color:"error",size:"small",sx:{ml:1}})]}),(0,L.jsx)(v.A,{children:(x=e.timestamp,new Date(x).toLocaleString())}),(0,L.jsx)(v.A,{children:H(u)}),(0,L.jsx)(v.A,{children:H(p)}),(0,L.jsx)(v.A,{children:H(h)}),(0,L.jsx)(v.A,{children:H(m)}),(0,L.jsx)(v.A,{children:e.prediction?(0,L.jsx)(s.A,{label:e.prediction,size:"small",color:"normal"===e.prediction.toLowerCase()?"success":"error"}):(0,L.jsx)(s.A,{label:"No prediction",size:"small",variant:"outlined"})}),(0,L.jsx)(v.A,{children:null==e.confidence||isNaN(e.confidence)?"N/A":(0,L.jsx)(s.A,{label:"".concat((100*e.confidence).toFixed(0),"%"),size:"small",color:e.confidence>.7?"success":"warning"})}),(0,L.jsx)(v.A,{children:e.has_feedback?(0,L.jsx)(s.A,{label:"Given",size:"small",color:"success"}):(0,L.jsx)(s.A,{label:"Pending",size:"small",variant:"outlined"})})]},e._id);var x})})]})}),(0,L.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",mt:3},children:(0,L.jsx)($,{count:D,page:I,onChange:(e,a)=>O(a),color:"primary"})})]}),(0,L.jsxs)(ee.A,{open:y,onClose:T,maxWidth:"sm",fullWidth:!0,children:[(0,L.jsxs)(ae.A,{children:["Submit Feedback for ",f.size," Reading(s)"]}),(0,L.jsx)(te.A,{children:(0,L.jsxs)(r.A,{sx:{pt:2},children:[(0,L.jsx)(oe.A,{select:!0,fullWidth:!0,label:"Correct Label",value:j,onChange:e=>k(e.target.value),sx:{mb:3},children:se.map(e=>(0,L.jsx)(ne.A,{value:e.value,children:e.label},e.value))}),(0,L.jsx)(oe.A,{fullWidth:!0,multiline:!0,rows:4,label:"Notes (Optional)",placeholder:"Add any additional information about this feedback...",value:C,onChange:e=>S(e.target.value)})]})}),(0,L.jsxs)(re.A,{children:[(0,L.jsx)(c.A,{onClick:T,disabled:N,children:"Cancel"}),(0,L.jsx)(c.A,{onClick:async()=>{try{B(null),M(!0);const e=a.filter(e=>f.has(e._id));if(0===e.length)return B("No readings selected"),void M(!1);const t=e.map(async e=>{let a=[];if(e.full_features&&Array.isArray(e.full_features)&&e.full_features.length>0)a=e.full_features;else{var t,o,n,r,i,l,s,c,d,u;a=[null!==(t=null!==(o=null===(n=e.motor_data)||void 0===n?void 0:n.DE_temp)&&void 0!==o?o:e.temperature)&&void 0!==t?t:0,null!==(r=e.vibration)&&void 0!==r?r:0,null!==(i=null!==(l=null===(s=e.pump_data)||void 0===s?void 0:s.DE_temp)&&void 0!==l?l:e.humidity)&&void 0!==i?i:0,null!==(c=null!==(d=null===(u=e.pump_data)||void 0===u?void 0:u.DE_ultra)&&void 0!==d?d:e.pressure)&&void 0!==c?c:0]}return(await ie.Ay.post("/feedback",a,{params:{original_prediction:e.prediction||"unknown",corrected_label:j,feedback_type:"correction",confidence:e.confidence,notes:C||"",sensor_id:e.sensor_id,reading_id:e._id,timestamp:e.timestamp}})).data});await Promise.all(t),z(!0),A(new Set),T(),await E(),setTimeout(()=>z(!1),3e3)}catch(o){var e,t;console.error("Error submitting feedback:",o);let a="Failed to submit feedback";if(null!==(e=o.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.detail){const e=o.response.data.detail;Array.isArray(e)?a=e.map(e=>{var a;return"object"===typeof e&&e.msg?"".concat((null===(a=e.loc)||void 0===a?void 0:a.join("."))||"Field",": ").concat(e.msg):JSON.stringify(e)}).join(", "):"string"===typeof e?a=e:"object"===typeof e&&(a=e.msg||JSON.stringify(e))}else o.message&&(a=o.message);B(a)}finally{M(!1)}},variant:"contained",color:"primary",disabled:N,children:N?"Submitting...":"Submit Feedback"})]})]})]})}},1962(e,a,t){t.d(a,{A:()=>z});var o=t(8587),n=t(8168),r=t(5043),i=t(8387),l=t(8610),s=t(7266),c=t(3064),d=t(9662),u=t(579);const p=(0,d.A)((0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),h=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),m=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var g=t(6803),v=t(8206),b=t(4535),x=t(1475),f=t(2532),A=t(2372);function y(e){return(0,A.Ay)("MuiCheckbox",e)}const _=(0,f.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),j=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],k=(0,b.Ay)(c.A,{shouldForwardProp:e=>(0,x.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:t}=e;return[a.root,t.indeterminate&&a.indeterminate,a["size".concat((0,g.A)(t.size))],"default"!==t.color&&a["color".concat((0,g.A)(t.color))]]}})(e=>{let{theme:a,ownerState:t}=e;return(0,n.A)({color:(a.vars||a).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:a.vars?"rgba(".concat("default"===t.color?a.vars.palette.action.activeChannel:a.vars.palette[t.color].mainChannel," / ").concat(a.vars.palette.action.hoverOpacity,")"):(0,s.X4)("default"===t.color?a.palette.action.active:a.palette[t.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{["&.".concat(_.checked,", &.").concat(_.indeterminate)]:{color:(a.vars||a).palette[t.color].main},["&.".concat(_.disabled)]:{color:(a.vars||a).palette.action.disabled}})}),C=(0,u.jsx)(h,{}),S=(0,u.jsx)(p,{}),w=(0,u.jsx)(m,{}),z=r.forwardRef(function(e,a){var t,s;const c=(0,v.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=C,color:p="primary",icon:h=S,indeterminate:m=!1,indeterminateIcon:b=w,inputProps:x,size:f="medium",className:A}=c,_=(0,o.A)(c,j),z=m?b:h,P=m?b:d,B=(0,n.A)({},c,{color:p,indeterminate:m,size:f}),R=(e=>{const{classes:a,indeterminate:t,color:o,size:r}=e,i={root:["root",t&&"indeterminate","color".concat((0,g.A)(o)),"size".concat((0,g.A)(r))]},s=(0,l.A)(i,y,a);return(0,n.A)({},a,s)})(B);return(0,u.jsx)(k,(0,n.A)({type:"checkbox",inputProps:(0,n.A)({"data-indeterminate":m},x),icon:r.cloneElement(z,{fontSize:null!=(t=z.props.fontSize)?t:f}),checkedIcon:r.cloneElement(P,{fontSize:null!=(s=P.props.fontSize)?s:f}),ownerState:B,ref:a,className:(0,i.A)(R.root,A)},_,{classes:R}))})},3064(e,a,t){t.d(a,{A:()=>y});var o=t(8587),n=t(8168),r=t(5043),i=t(8387),l=t(8610),s=t(6803),c=t(4535),d=t(1475),u=t(4516),p=t(5213),h=t(6236),m=t(2532),g=t(2372);function v(e){return(0,g.Ay)("PrivateSwitchBase",e)}(0,m.A)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var b=t(579);const x=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],f=(0,c.Ay)(h.A,{name:"MuiSwitchBase"})(e=>{let{ownerState:a}=e;return(0,n.A)({padding:9,borderRadius:"50%"},"start"===a.edge&&{marginLeft:"small"===a.size?-3:-12},"end"===a.edge&&{marginRight:"small"===a.size?-3:-12})}),A=(0,c.Ay)("input",{name:"MuiSwitchBase",shouldForwardProp:d.A})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),y=r.forwardRef(function(e,a){const{autoFocus:t,checked:r,checkedIcon:c,className:d,defaultChecked:h,disabled:m,disableFocusRipple:g=!1,edge:y=!1,icon:_,id:j,inputProps:k,inputRef:C,name:S,onBlur:w,onChange:z,onFocus:P,readOnly:B,required:R=!1,tabIndex:F,type:N,value:M}=e,I=(0,o.A)(e,x),[L,O]=(0,u.A)({controlled:r,default:Boolean(h),name:"SwitchBase",state:"checked"}),D=(0,p.A)();let W=m;D&&"undefined"===typeof W&&(W=D.disabled);const E="checkbox"===N||"radio"===N,V=(0,n.A)({},e,{checked:L,disabled:W,disableFocusRipple:g,edge:y}),T=(e=>{const{classes:a,checked:t,disabled:o,edge:n}=e,r={root:["root",t&&"checked",o&&"disabled",n&&"edge".concat((0,s.A)(n))],input:["input"]};return(0,l.A)(r,v,a)})(V);return(0,b.jsxs)(f,(0,n.A)({component:"span",className:(0,i.A)(T.root,d),centerRipple:!0,focusRipple:!g,disabled:W,tabIndex:null,role:void 0,onFocus:e=>{P&&P(e),D&&D.onFocus&&D.onFocus(e)},onBlur:e=>{w&&w(e),D&&D.onBlur&&D.onBlur(e)},ownerState:V,ref:a},I,{children:[(0,b.jsx)(A,(0,n.A)({autoFocus:t,checked:r,defaultChecked:h,className:T.input,disabled:W,id:E?j:void 0,name:S,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const a=e.target.checked;O(a),z&&z(e,a)},readOnly:B,ref:C,required:R,ownerState:V,tabIndex:F,type:N},"checkbox"===N&&void 0===M?{}:{value:M},k)),L?c:_]}))})}}]);
//# sourceMappingURL=641.6f796daf.chunk.js.map