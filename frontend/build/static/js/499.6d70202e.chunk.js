"use strict";(self.webpackChunkaastreli_frontend=self.webpackChunkaastreli_frontend||[]).push([[499],{536(e,t,n){n.d(t,{A:()=>w});var a=n(5043),o=n(35),c=n(6600),r=n(5316),l=n(8587),s=n(8168),i=n(8387),d=n(8610),h=n(4535),u=n(1475),A=n(8206),p=n(5865),v=n(2532),m=n(2372);function x(e){return(0,m.Ay)("MuiDialogContentText",e)}(0,v.A)("MuiDialogContentText",["root"]);var g=n(579);const j=["children","className"],f=(0,h.Ay)(p.A,{shouldForwardProp:e=>(0,u.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),b=a.forwardRef(function(e,t){const n=(0,A.b)({props:e,name:"MuiDialogContentText"}),{className:a}=n,o=(0,l.A)(n,j),c=(e=>{const{classes:t}=e,n=(0,d.A)({root:["root"]},x,t);return(0,s.A)({},t,n)})(o);return(0,g.jsx)(f,(0,s.A)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:o,className:(0,i.A)(c.root,a)},n,{classes:c}))});var y=n(9347),C=n(1906);function w(e){let{open:t,title:n,message:a,confirmLabel:l="Confirm",cancelLabel:s="Cancel",onConfirm:i,onCancel:d}=e;return(0,g.jsxs)(o.A,{open:t,onClose:d,children:[(0,g.jsx)(c.A,{children:n}),(0,g.jsx)(r.A,{children:(0,g.jsx)(b,{children:a})}),(0,g.jsxs)(y.A,{children:[(0,g.jsx)(C.A,{onClick:d,children:s}),(0,g.jsx)(C.A,{onClick:i,variant:"contained",autoFocus:!0,children:l})]})]})}},2499(e,t,n){n.r(t),n.d(t,{default:()=>O});var a=n(2555),o=n(5043),c=n(9252),r=n(1637),l=n(6446),s=n(5865),i=n(1906),d=n(547),h=n(9650),u=n(3336),A=n(1806),p=n(4882),v=n(8076),m=n(39),x=n(3460),g=n(3845),j=n(8483),f=n(7392),b=n(35),y=n(6600),C=n(5316),w=n(5795),k=n(3193),_=n(9190),S=n(9285),T=n(2143),z=n(8577),M=n(4598),D=n(9347),R=n(2505),N=n(3159),F=n(3471),I=n(5054),P=n(536),E=n(6624),W=n(579);const B={tenant_code:"",tenant_name:"",plan:"free",is_active:!0};function O(){const{tenantVersion:e}=(0,E.n8)(),[t,n]=(0,o.useState)([]),[O,L]=(0,o.useState)(!0),[V,q]=(0,o.useState)(null),[X,H]=(0,o.useState)(null),[G,U]=(0,o.useState)(!1),[$,J]=(0,o.useState)(!1),[K,Q]=(0,o.useState)(B),[Y,Z]=(0,o.useState)(null),[ee,te]=(0,o.useState)(null),ne=async()=>{try{const{data:e}=await I.Ay.get("/tenants");n(Array.isArray(e)?e:[])}catch(e){console.error("Failed to load tenants:",e)}finally{L(!1)}};(0,o.useEffect)(()=>{ne()},[e]);return O?(0,W.jsx)(c.A,{maxWidth:"lg",sx:{mt:4,display:"flex",justifyContent:"center"},children:(0,W.jsx)(r.A,{})}):(0,W.jsxs)(c.A,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,W.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,W.jsx)(s.A,{variant:"h4",children:"Tenants"}),(0,W.jsx)(i.A,{variant:"contained",startIcon:(0,W.jsx)(R.A,{}),onClick:()=>{Z(null),Q(B),q(null),U(!0)},children:"Add Tenant"})]}),X&&(0,W.jsx)(d.A,{severity:"success",sx:{mb:2},onClose:()=>H(null),children:X}),V&&!G&&(0,W.jsx)(d.A,{severity:"error",sx:{mb:2},onClose:()=>q(null),children:V}),(0,W.jsx)(h.A,{component:u.A,children:(0,W.jsxs)(A.A,{children:[(0,W.jsx)(p.A,{children:(0,W.jsxs)(v.A,{children:[(0,W.jsx)(m.A,{children:(0,W.jsx)("strong",{children:"Tenant Code"})}),(0,W.jsx)(m.A,{children:(0,W.jsx)("strong",{children:"Tenant Name"})}),(0,W.jsx)(m.A,{children:(0,W.jsx)("strong",{children:"Plan"})}),(0,W.jsx)(m.A,{children:(0,W.jsx)("strong",{children:"Status"})}),(0,W.jsx)(m.A,{children:(0,W.jsx)("strong",{children:"Created"})}),(0,W.jsx)(m.A,{align:"right",children:(0,W.jsx)("strong",{children:"Actions"})})]})}),(0,W.jsx)(x.A,{children:0===t.length?(0,W.jsx)(v.A,{children:(0,W.jsx)(m.A,{colSpan:6,align:"center",children:(0,W.jsx)(s.A,{variant:"body2",color:"text.secondary",sx:{py:4},children:'No tenants found. Click "Add Tenant" to create one.'})})}):t.map(e=>(0,W.jsxs)(v.A,{hover:!0,children:[(0,W.jsx)(m.A,{children:(0,W.jsx)(s.A,{variant:"body2",sx:{fontFamily:"monospace",fontWeight:600},children:e.tenant_code})}),(0,W.jsx)(m.A,{children:e.tenant_name}),(0,W.jsx)(m.A,{children:(0,W.jsx)(g.A,{label:e.plan,size:"small",variant:"outlined"})}),(0,W.jsx)(m.A,{children:(0,W.jsx)(g.A,{label:e.is_active?"Active":"Inactive",size:"small",color:e.is_active?"success":"default",onClick:()=>(async e=>{try{await I.Ay.patch("/tenants/".concat(e.id),{is_active:!e.is_active}),H('Tenant "'.concat(e.tenant_code,'" ').concat(e.is_active?"deactivated":"activated"," successfully")),setTimeout(()=>H(null),4e3),await ne()}catch(a){var t,n;q((null===(t=a.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||"Failed to update tenant")}})(e),sx:{cursor:"pointer"}})}),(0,W.jsx)(m.A,{children:e.created_at?new Date(e.created_at).toLocaleDateString():"\u2014"}),(0,W.jsxs)(m.A,{align:"right",children:[(0,W.jsx)(j.A,{title:"Edit",children:(0,W.jsx)(f.A,{size:"small",onClick:()=>(e=>{Z(e.id),Q({tenant_code:e.tenant_code,tenant_name:e.tenant_name,plan:e.plan,is_active:e.is_active}),q(null),U(!0)})(e),children:(0,W.jsx)(N.A,{fontSize:"small"})})}),(0,W.jsx)(j.A,{title:"Delete",children:(0,W.jsx)(f.A,{size:"small",color:"error",onClick:()=>te(e),children:(0,W.jsx)(F.A,{fontSize:"small"})})})]})]},e.id))})]})}),(0,W.jsxs)(b.A,{open:G,onClose:()=>U(!1),maxWidth:"sm",fullWidth:!0,children:[(0,W.jsx)(y.A,{children:Y?"Edit Tenant":"Create Tenant"}),(0,W.jsxs)(C.A,{children:[V&&G&&(0,W.jsx)(d.A,{severity:"error",sx:{mb:2,mt:1},onClose:()=>q(null),children:V}),(0,W.jsx)(w.A,{fullWidth:!0,required:!0,label:"Tenant Code",value:K.tenant_code,onChange:e=>Q((0,a.A)((0,a.A)({},K),{},{tenant_code:e.target.value})),sx:{mt:2,mb:2},placeholder:"e.g. acme-corp",disabled:!!Y,helperText:Y?"Tenant code cannot be changed":""}),(0,W.jsx)(w.A,{fullWidth:!0,required:!0,label:"Tenant Name",value:K.tenant_name,onChange:e=>Q((0,a.A)((0,a.A)({},K),{},{tenant_name:e.target.value})),sx:{mb:2},placeholder:"e.g. Acme Corporation"}),(0,W.jsxs)(k.A,{fullWidth:!0,sx:{mb:2},children:[(0,W.jsx)(_.A,{children:"Plan"}),(0,W.jsxs)(S.A,{value:K.plan,label:"Plan",onChange:e=>Q((0,a.A)((0,a.A)({},K),{},{plan:e.target.value})),children:[(0,W.jsx)(T.A,{value:"free",children:"Free"}),(0,W.jsx)(T.A,{value:"pro",children:"Pro"}),(0,W.jsx)(T.A,{value:"enterprise",children:"Enterprise"})]})]}),Y&&(0,W.jsx)(z.A,{control:(0,W.jsx)(M.A,{checked:K.is_active,onChange:e=>Q((0,a.A)((0,a.A)({},K),{},{is_active:e.target.checked}))}),label:"Active"})]}),(0,W.jsxs)(D.A,{sx:{px:3,pb:2},children:[(0,W.jsx)(i.A,{onClick:()=>{U(!1),q(null)},children:"Cancel"}),(0,W.jsx)(i.A,{variant:"contained",onClick:async()=>{if(K.tenant_code&&K.tenant_name){J(!0),q(null);try{Y?(await I.Ay.patch("/tenants/".concat(Y),{tenant_name:K.tenant_name,plan:K.plan,is_active:K.is_active}),H('Tenant "'.concat(K.tenant_code,'" updated successfully'))):(await I.Ay.post("/tenants",{tenant_code:K.tenant_code,tenant_name:K.tenant_name,plan:K.plan}),H('Tenant "'.concat(K.tenant_code,'" created successfully'))),setTimeout(()=>H(null),4e3),U(!1),Q(B),Z(null),await ne()}catch(n){var e,t;q((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to save tenant")}finally{J(!1)}}else q("Tenant Code and Tenant Name are required")},disabled:$||!K.tenant_code||!K.tenant_name,children:$?"Saving...":Y?"Update Tenant":"Create Tenant"})]})]}),(0,W.jsx)(P.A,{open:!!ee,title:"Delete Tenant",message:'Are you sure you want to delete tenant "'.concat(null===ee||void 0===ee?void 0:ee.tenant_code,'"? This action cannot be undone.'),confirmLabel:"Delete",onConfirm:async()=>{if(ee)try{await I.Ay.delete("/tenants/".concat(ee.id)),H('Tenant "'.concat(ee.tenant_code,'" deleted successfully')),setTimeout(()=>H(null),4e3),te(null),await ne()}catch(n){var e,t;q((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to delete tenant"),te(null)}},onCancel:()=>te(null)})]})}},2505(e,t,n){var a=n(4994);t.A=void 0;var o=a(n(2420)),c=n(579);t.A=(0,o.default)((0,c.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},3471(e,t,n){var a=n(4994);t.A=void 0;var o=a(n(2420)),c=n(579);t.A=(0,o.default)((0,c.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},3159(e,t,n){var a=n(4994);t.A=void 0;var o=a(n(2420)),c=n(579);t.A=(0,o.default)((0,c.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},2420(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.createSvgIcon}});var a=n(4421)},4598(e,t,n){n.d(t,{A:()=>C});var a=n(8587),o=n(8168),c=n(5043),r=n(8387),l=n(8610),s=n(7266),i=n(6803),d=n(3064),h=n(4535),u=n(8206),A=n(2532),p=n(2372);function v(e){return(0,p.Ay)("MuiSwitch",e)}const m=(0,A.A)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]);var x=n(579);const g=["className","color","edge","size","sx"],j=(0,h.Ay)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.edge&&t["edge".concat((0,i.A)(n.edge))],t["size".concat((0,i.A)(n.size))]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,["& .".concat(m.thumb)]:{width:16,height:16},["& .".concat(m.switchBase)]:{padding:4,["&.".concat(m.checked)]:{transform:"translateX(16px)"}}}}]}),f=(0,h.Ay)(d.A,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.switchBase,{["& .".concat(m.input)]:t.input},"default"!==n.color&&t["color".concat((0,i.A)(n.color))]]}})(e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:"".concat("light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]),transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),["&.".concat(m.checked)]:{transform:"translateX(20px)"},["&.".concat(m.disabled)]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:"".concat("light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600])},["&.".concat(m.checked," + .").concat(m.track)]:{opacity:.5},["&.".concat(m.disabled," + .").concat(m.track)]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:"".concat("light"===t.palette.mode?.12:.2)},["& .".concat(m.input)]:{left:"-100%",width:"300%"}}},e=>{let{theme:t}=e;return{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,s.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(e=>{let[,t]=e;return t.main&&t.light}).map(e=>{let[n]=e;return{props:{color:n},style:{["&.".concat(m.checked)]:{color:(t.vars||t).palette[n].main,"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,s.X4)(t.palette[n].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(m.disabled)]:{color:t.vars?t.vars.palette.Switch["".concat(n,"DisabledColor")]:"".concat("light"===t.palette.mode?(0,s.a)(t.palette[n].main,.62):(0,s.e$)(t.palette[n].main,.55))}},["&.".concat(m.checked," + .").concat(m.track)]:{backgroundColor:(t.vars||t).palette[n].main}}}})]}}),b=(0,h.Ay)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}}),y=(0,h.Ay)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}}),C=c.forwardRef(function(e,t){const n=(0,u.b)({props:e,name:"MuiSwitch"}),{className:c,color:s="primary",edge:d=!1,size:h="medium",sx:A}=n,p=(0,a.A)(n,g),m=(0,o.A)({},n,{color:s,edge:d,size:h}),C=(e=>{const{classes:t,edge:n,size:a,color:c,checked:r,disabled:s}=e,d={root:["root",n&&"edge".concat((0,i.A)(n)),"size".concat((0,i.A)(a))],switchBase:["switchBase","color".concat((0,i.A)(c)),r&&"checked",s&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},h=(0,l.A)(d,v,t);return(0,o.A)({},t,h)})(m),w=(0,x.jsx)(y,{className:C.thumb,ownerState:m});return(0,x.jsxs)(j,{className:(0,r.A)(C.root,c),sx:A,ownerState:m,children:[(0,x.jsx)(f,(0,o.A)({type:"checkbox",icon:w,checkedIcon:w,ref:t,ownerState:m},p,{classes:(0,o.A)({},C,{root:C.switchBase})})),(0,x.jsx)(b,{className:C.track,ownerState:m})]})})},4421(e,t,n){n.r(t),n.d(t,{capitalize:()=>o.A,createChainedFunction:()=>c,createSvgIcon:()=>r.A,debounce:()=>l.A,deprecatedPropType:()=>s,isMuiElement:()=>i.A,ownerDocument:()=>d.A,ownerWindow:()=>h.A,requirePropFactory:()=>u,setRef:()=>A,unstable_ClassNameGenerator:()=>b,unstable_useEnhancedEffect:()=>p.A,unstable_useId:()=>v.A,unsupportedProp:()=>m,useControlled:()=>x.A,useEventCallback:()=>g.A,useForkRef:()=>j.A,useIsFocusVisible:()=>f.A});var a=n(9386),o=n(6803);const c=n(2456).A;var r=n(9662),l=n(950);const s=function(e,t){return()=>null};var i=n(7328),d=n(2427),h=n(6078);const u=function(e,t){return()=>null};const A=n(6564).A;var p=n(5013),v=n(5879);const m=function(e,t,n,a,o){return null};var x=n(4516),g=n(3319),j=n(5849),f=n(3574);const b={configure:e=>{a.A.configure(e)}}}}]);
//# sourceMappingURL=499.6d70202e.chunk.js.map