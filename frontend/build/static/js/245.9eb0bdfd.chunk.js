"use strict";(self.webpackChunkaastreli_frontend=self.webpackChunkaastreli_frontend||[]).push([[245],{536(e,s,t){t.d(s,{A:()=>C});var n=t(5043),a=t(35),l=t(6600),r=t(5316),i=t(8587),o=t(8168),c=t(8387),d=t(8610),u=t(4535),A=t(1475),h=t(8206),x=t(5865),m=t(2532),j=t(2372);function f(e){return(0,j.Ay)("MuiDialogContentText",e)}(0,m.A)("MuiDialogContentText",["root"]);var v=t(579);const p=["children","className"],_=(0,u.Ay)(x.A,{shouldForwardProp:e=>(0,A.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,s)=>s.root})({}),y=n.forwardRef(function(e,s){const t=(0,h.b)({props:e,name:"MuiDialogContentText"}),{className:n}=t,a=(0,i.A)(t,p),l=(e=>{const{classes:s}=e,t=(0,d.A)({root:["root"]},f,s);return(0,o.A)({},s,t)})(a);return(0,v.jsx)(_,(0,o.A)({component:"p",variant:"body1",color:"text.secondary",ref:s,ownerState:a,className:(0,c.A)(l.root,n)},t,{classes:l}))});var g=t(9347),b=t(1906);function C(e){let{open:s,title:t,message:n,confirmLabel:i="Confirm",cancelLabel:o="Cancel",onConfirm:c,onCancel:d}=e;return(0,v.jsxs)(a.A,{open:s,onClose:d,children:[(0,v.jsx)(l.A,{children:t}),(0,v.jsx)(r.A,{children:(0,v.jsx)(y,{children:n})}),(0,v.jsxs)(g.A,{children:[(0,v.jsx)(b.A,{onClick:d,children:o}),(0,v.jsx)(b.A,{onClick:c,variant:"contained",autoFocus:!0,children:i})]})]})}},4245(e,s,t){t.r(s),t.d(s,{default:()=>q});var n=t(2555),a=t(5043),l=t(9252),r=t(1637),i=t(6446),o=t(5865),c=t(1906),d=t(547),u=t(9650),A=t(3336),h=t(1806),x=t(4882),m=t(8076),j=t(39),f=t(3460),v=t(8483),p=t(7392),_=t(35),y=t(6600),g=t(5316),b=t(5795),C=t(3193),S=t(9190),M=t(9285),w=t(2143),k=t(9347),z=t(2505),W=t(3159),F=t(3471),D=t(7260),P=t(3216),T=t(5054),N=t(536),E=t(6624),V=t(579);const I={asset_code:"",asset_name:"",site_id:"",asset_type:"",manufacturer:"",model_number:""};function q(){const{tenantVersion:e}=(0,E.n8)(),s=(0,P.Zp)(),[t,q]=(0,a.useState)([]),[R,L]=(0,a.useState)([]),[H,O]=(0,a.useState)(!0),[U,Z]=(0,a.useState)(null),[G,X]=(0,a.useState)(null),[Y,B]=(0,a.useState)(!1),[J,K]=(0,a.useState)(!1),[Q,$]=(0,a.useState)(I),[ee,se]=(0,a.useState)(null),[te,ne]=(0,a.useState)(null),ae=async()=>{try{const{data:e}=await T.Ay.get("/assets");q(Array.isArray(e)?e:e.assets||[])}catch(e){console.error("Failed to load assets:",e)}finally{O(!1)}};(0,a.useEffect)(()=>{(async()=>{try{const{data:e}=await T.Ay.get("/sites");L(Array.isArray(e)?e:e.sites||[])}catch(e){console.error("Failed to load sites:",e)}})(),ae()},[e]);const le=e=>{const s=R.find(s=>s.id===e);return s?"".concat(s.site_name," (").concat(s.site_code,")"):e};return H?(0,V.jsx)(l.A,{maxWidth:"lg",sx:{mt:4,display:"flex",justifyContent:"center"},children:(0,V.jsx)(r.A,{})}):(0,V.jsxs)(l.A,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,V.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,V.jsx)(o.A,{variant:"h4",children:"Assets"}),(0,V.jsx)(c.A,{variant:"contained",startIcon:(0,V.jsx)(z.A,{}),onClick:()=>{se(null),$(I),Z(null),B(!0)},children:"Add Asset"})]}),G&&(0,V.jsx)(d.A,{severity:"success",sx:{mb:2},onClose:()=>X(null),children:G}),U&&!Y&&(0,V.jsx)(d.A,{severity:"error",sx:{mb:2},onClose:()=>Z(null),children:U}),(0,V.jsx)(u.A,{component:A.A,children:(0,V.jsxs)(h.A,{children:[(0,V.jsx)(x.A,{children:(0,V.jsxs)(m.A,{children:[(0,V.jsx)(j.A,{children:(0,V.jsx)("strong",{children:"Asset Code"})}),(0,V.jsx)(j.A,{children:(0,V.jsx)("strong",{children:"Asset Name"})}),(0,V.jsx)(j.A,{children:(0,V.jsx)("strong",{children:"Site"})}),(0,V.jsx)(j.A,{children:(0,V.jsx)("strong",{children:"Type"})}),(0,V.jsx)(j.A,{children:(0,V.jsx)("strong",{children:"Manufacturer"})}),(0,V.jsx)(j.A,{align:"right",children:(0,V.jsx)("strong",{children:"Actions"})})]})}),(0,V.jsx)(f.A,{children:0===t.length?(0,V.jsx)(m.A,{children:(0,V.jsx)(j.A,{colSpan:6,align:"center",children:(0,V.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{py:4},children:'No assets configured. Click "Add Asset" to get started.'})})}):t.map(e=>(0,V.jsxs)(m.A,{hover:!0,children:[(0,V.jsx)(j.A,{children:(0,V.jsx)(o.A,{variant:"body2",sx:{fontFamily:"monospace",fontWeight:600},children:e.asset_code})}),(0,V.jsx)(j.A,{children:e.asset_name}),(0,V.jsx)(j.A,{children:le(e.site_id)}),(0,V.jsx)(j.A,{children:e.asset_type||"\u2014"}),(0,V.jsx)(j.A,{children:e.manufacturer||"\u2014"}),(0,V.jsxs)(j.A,{align:"right",children:[(0,V.jsx)(v.A,{title:"View Details",children:(0,V.jsx)(p.A,{size:"small",onClick:()=>s("/assets/".concat(e.id)),children:(0,V.jsx)(D.A,{fontSize:"small"})})}),(0,V.jsx)(v.A,{title:"Edit",children:(0,V.jsx)(p.A,{size:"small",onClick:()=>(e=>{se(e.id),$({asset_code:e.asset_code,asset_name:e.asset_name,site_id:e.site_id,asset_type:e.asset_type||"",manufacturer:e.manufacturer||"",model_number:e.model_number||""}),Z(null),B(!0)})(e),children:(0,V.jsx)(W.A,{fontSize:"small"})})}),(0,V.jsx)(v.A,{title:"Delete",children:(0,V.jsx)(p.A,{size:"small",color:"error",onClick:()=>ne(e),children:(0,V.jsx)(F.A,{fontSize:"small"})})})]})]},e.id))})]})}),(0,V.jsxs)(_.A,{open:Y,onClose:()=>B(!1),maxWidth:"sm",fullWidth:!0,children:[(0,V.jsx)(y.A,{children:ee?"Edit Asset":"Create Asset"}),(0,V.jsxs)(g.A,{children:[U&&Y&&(0,V.jsx)(d.A,{severity:"error",sx:{mb:2,mt:1},onClose:()=>Z(null),children:U}),(0,V.jsx)(b.A,{fullWidth:!0,required:!0,label:"Asset Code",value:Q.asset_code,onChange:e=>$((0,n.A)((0,n.A)({},Q),{},{asset_code:e.target.value})),sx:{mt:2,mb:2},placeholder:"e.g. PUMP-001"}),(0,V.jsx)(b.A,{fullWidth:!0,required:!0,label:"Asset Name",value:Q.asset_name,onChange:e=>$((0,n.A)((0,n.A)({},Q),{},{asset_name:e.target.value})),sx:{mb:2},placeholder:"e.g. Main Cooling Pump"}),(0,V.jsxs)(C.A,{fullWidth:!0,required:!0,sx:{mb:2},children:[(0,V.jsx)(S.A,{children:"Site"}),(0,V.jsx)(M.A,{value:Q.site_id,label:"Site",onChange:e=>$((0,n.A)((0,n.A)({},Q),{},{site_id:e.target.value})),children:R.map(e=>(0,V.jsxs)(w.A,{value:e.id,children:[e.site_name," (",e.site_code,")"]},e.id))})]}),(0,V.jsx)(b.A,{fullWidth:!0,label:"Asset Type",value:Q.asset_type,onChange:e=>$((0,n.A)((0,n.A)({},Q),{},{asset_type:e.target.value})),sx:{mb:2},placeholder:"e.g. Pump, Motor, Compressor"}),(0,V.jsx)(b.A,{fullWidth:!0,label:"Manufacturer",value:Q.manufacturer,onChange:e=>$((0,n.A)((0,n.A)({},Q),{},{manufacturer:e.target.value})),sx:{mb:2},placeholder:"e.g. Siemens"}),(0,V.jsx)(b.A,{fullWidth:!0,label:"Model Number",value:Q.model_number,onChange:e=>$((0,n.A)((0,n.A)({},Q),{},{model_number:e.target.value})),placeholder:"e.g. XYZ-1234"})]}),(0,V.jsxs)(k.A,{sx:{px:3,pb:2},children:[(0,V.jsx)(c.A,{onClick:()=>{B(!1),Z(null)},children:"Cancel"}),(0,V.jsx)(c.A,{variant:"contained",onClick:async()=>{if(Q.asset_code&&Q.asset_name&&Q.site_id){K(!0),Z(null);try{const e={asset_code:Q.asset_code,asset_name:Q.asset_name,site_id:Q.site_id};Q.asset_type&&(e.asset_type=Q.asset_type),Q.manufacturer&&(e.manufacturer=Q.manufacturer),Q.model_number&&(e.model_number=Q.model_number),ee?(await T.Ay.patch("/assets/".concat(ee),e),X('Asset "'.concat(Q.asset_code,'" updated successfully'))):(await T.Ay.post("/assets",e),X('Asset "'.concat(Q.asset_code,'" created successfully'))),setTimeout(()=>X(null),4e3),B(!1),$(I),se(null),await ae()}catch(t){var e,s;Z((null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.detail)||"Failed to save asset")}finally{K(!1)}}else Z("Asset Code, Asset Name, and Site are required")},disabled:J||!Q.asset_code||!Q.asset_name||!Q.site_id,children:J?"Saving...":ee?"Update Asset":"Create Asset"})]})]}),(0,V.jsx)(N.A,{open:!!te,title:"Delete Asset",message:'Are you sure you want to delete asset "'.concat(null===te||void 0===te?void 0:te.asset_code,'"? This action cannot be undone.'),confirmLabel:"Delete",onConfirm:async()=>{if(te)try{await T.Ay.delete("/assets/".concat(te.id)),X('Asset "'.concat(te.asset_code,'" deleted successfully')),setTimeout(()=>X(null),4e3),ne(null),await ae()}catch(t){var e,s;Z((null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.detail)||"Failed to delete asset"),ne(null)}},onCancel:()=>ne(null)})]})}},2505(e,s,t){var n=t(4994);s.A=void 0;var a=n(t(2420)),l=t(579);s.A=(0,a.default)((0,l.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},3471(e,s,t){var n=t(4994);s.A=void 0;var a=n(t(2420)),l=t(579);s.A=(0,a.default)((0,l.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},3159(e,s,t){var n=t(4994);s.A=void 0;var a=n(t(2420)),l=t(579);s.A=(0,a.default)((0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},7260(e,s,t){var n=t(4994);s.A=void 0;var a=n(t(2420)),l=t(579);s.A=(0,a.default)((0,l.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},2420(e,s,t){Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=t(4421)},4421(e,s,t){t.r(s),t.d(s,{capitalize:()=>a.A,createChainedFunction:()=>l,createSvgIcon:()=>r.A,debounce:()=>i.A,deprecatedPropType:()=>o,isMuiElement:()=>c.A,ownerDocument:()=>d.A,ownerWindow:()=>u.A,requirePropFactory:()=>A,setRef:()=>h,unstable_ClassNameGenerator:()=>y,unstable_useEnhancedEffect:()=>x.A,unstable_useId:()=>m.A,unsupportedProp:()=>j,useControlled:()=>f.A,useEventCallback:()=>v.A,useForkRef:()=>p.A,useIsFocusVisible:()=>_.A});var n=t(9386),a=t(6803);const l=t(2456).A;var r=t(9662),i=t(950);const o=function(e,s){return()=>null};var c=t(7328),d=t(2427),u=t(6078);const A=function(e,s){return()=>null};const h=t(6564).A;var x=t(5013),m=t(5879);const j=function(e,s,t,n,a){return null};var f=t(4516),v=t(3319),p=t(5849),_=t(3574);const y={configure:e=>{n.A.configure(e)}}}}]);
//# sourceMappingURL=245.9eb0bdfd.chunk.js.map