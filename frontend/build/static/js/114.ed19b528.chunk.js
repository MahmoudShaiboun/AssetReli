"use strict";(self.webpackChunkaastreli_frontend=self.webpackChunkaastreli_frontend||[]).push([[114],{536(e,t,n){n.d(t,{A:()=>S});var s=n(5043),l=n(35),i=n(6600),a=n(5316),r=n(8587),o=n(8168),c=n(8387),d=n(8610),u=n(4535),A=n(1475),h=n(8206),x=n(5865),j=n(2532),m=n(2372);function v(e){return(0,m.Ay)("MuiDialogContentText",e)}(0,j.A)("MuiDialogContentText",["root"]);var y=n(579);const f=["children","className"],C=(0,u.Ay)(x.A,{shouldForwardProp:e=>(0,A.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),g=s.forwardRef(function(e,t){const n=(0,h.b)({props:e,name:"MuiDialogContentText"}),{className:s}=n,l=(0,r.A)(n,f),i=(e=>{const{classes:t}=e,n=(0,d.A)({root:["root"]},v,t);return(0,o.A)({},t,n)})(l);return(0,y.jsx)(C,(0,o.A)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:l,className:(0,c.A)(i.root,s)},n,{classes:i}))});var p=n(9347),b=n(1906);function S(e){let{open:t,title:n,message:s,confirmLabel:r="Confirm",cancelLabel:o="Cancel",onConfirm:c,onCancel:d}=e;return(0,y.jsxs)(l.A,{open:t,onClose:d,children:[(0,y.jsx)(i.A,{children:n}),(0,y.jsx)(a.A,{children:(0,y.jsx)(g,{children:s})}),(0,y.jsxs)(p.A,{children:[(0,y.jsx)(b.A,{onClick:d,children:o}),(0,y.jsx)(b.A,{onClick:c,variant:"contained",autoFocus:!0,children:r})]})]})}},114(e,t,n){n.r(t),n.d(t,{default:()=>D});var s=n(2555),l=n(5043),i=n(9252),a=n(1637),r=n(6446),o=n(5865),c=n(1906),d=n(547),u=n(9650),A=n(3336),h=n(1806),x=n(4882),j=n(8076),m=n(39),v=n(3460),y=n(8483),f=n(7392),C=n(35),g=n(6600),p=n(5316),b=n(5795),S=n(9347),_=n(2505),z=n(3159),w=n(3471),T=n(5054),k=n(536),M=n(6624),W=n(579);const F={site_code:"",site_name:"",address:"",city:"",country:"",timezone:"UTC"};function D(){const{tenantVersion:e}=(0,M.n8)(),[t,n]=(0,l.useState)([]),[D,E]=(0,l.useState)(!0),[I,N]=(0,l.useState)(null),[P,U]=(0,l.useState)(null),[R,V]=(0,l.useState)(!1),[q,H]=(0,l.useState)(!1),[L,O]=(0,l.useState)(F),[G,B]=(0,l.useState)(null),[J,K]=(0,l.useState)(null),Q=async()=>{try{const{data:e}=await T.Ay.get("/sites");n(Array.isArray(e)?e:e.sites||[])}catch(e){console.error("Failed to load sites:",e)}finally{E(!1)}};(0,l.useEffect)(()=>{Q()},[e]);return D?(0,W.jsx)(i.A,{maxWidth:"lg",sx:{mt:4,display:"flex",justifyContent:"center"},children:(0,W.jsx)(a.A,{})}):(0,W.jsxs)(i.A,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,W.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,W.jsx)(o.A,{variant:"h4",children:"Sites"}),(0,W.jsx)(c.A,{variant:"contained",startIcon:(0,W.jsx)(_.A,{}),onClick:()=>{B(null),O(F),N(null),V(!0)},children:"Add Site"})]}),P&&(0,W.jsx)(d.A,{severity:"success",sx:{mb:2},onClose:()=>U(null),children:P}),I&&!R&&(0,W.jsx)(d.A,{severity:"error",sx:{mb:2},onClose:()=>N(null),children:I}),(0,W.jsx)(u.A,{component:A.A,children:(0,W.jsxs)(h.A,{children:[(0,W.jsx)(x.A,{children:(0,W.jsxs)(j.A,{children:[(0,W.jsx)(m.A,{children:(0,W.jsx)("strong",{children:"Site Code"})}),(0,W.jsx)(m.A,{children:(0,W.jsx)("strong",{children:"Site Name"})}),(0,W.jsx)(m.A,{children:(0,W.jsx)("strong",{children:"City"})}),(0,W.jsx)(m.A,{children:(0,W.jsx)("strong",{children:"Country"})}),(0,W.jsx)(m.A,{children:(0,W.jsx)("strong",{children:"Timezone"})}),(0,W.jsx)(m.A,{align:"right",children:(0,W.jsx)("strong",{children:"Actions"})})]})}),(0,W.jsx)(v.A,{children:0===t.length?(0,W.jsx)(j.A,{children:(0,W.jsx)(m.A,{colSpan:6,align:"center",children:(0,W.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{py:4},children:'No sites configured. Click "Add Site" to get started.'})})}):t.map(e=>(0,W.jsxs)(j.A,{hover:!0,children:[(0,W.jsx)(m.A,{children:(0,W.jsx)(o.A,{variant:"body2",sx:{fontFamily:"monospace",fontWeight:600},children:e.site_code})}),(0,W.jsx)(m.A,{children:e.site_name}),(0,W.jsx)(m.A,{children:e.city||"\u2014"}),(0,W.jsx)(m.A,{children:e.country||"\u2014"}),(0,W.jsx)(m.A,{children:e.timezone}),(0,W.jsxs)(m.A,{align:"right",children:[(0,W.jsx)(y.A,{title:"Edit",children:(0,W.jsx)(f.A,{size:"small",onClick:()=>(e=>{B(e.id),O({site_code:e.site_code,site_name:e.site_name,address:e.address||"",city:e.city||"",country:e.country||"",timezone:e.timezone||"UTC"}),N(null),V(!0)})(e),children:(0,W.jsx)(z.A,{fontSize:"small"})})}),(0,W.jsx)(y.A,{title:"Delete",children:(0,W.jsx)(f.A,{size:"small",color:"error",onClick:()=>K(e),children:(0,W.jsx)(w.A,{fontSize:"small"})})})]})]},e.id))})]})}),(0,W.jsxs)(C.A,{open:R,onClose:()=>V(!1),maxWidth:"sm",fullWidth:!0,children:[(0,W.jsx)(g.A,{children:G?"Edit Site":"Create Site"}),(0,W.jsxs)(p.A,{children:[I&&R&&(0,W.jsx)(d.A,{severity:"error",sx:{mb:2,mt:1},onClose:()=>N(null),children:I}),(0,W.jsx)(b.A,{fullWidth:!0,required:!0,label:"Site Code",value:L.site_code,onChange:e=>O((0,s.A)((0,s.A)({},L),{},{site_code:e.target.value})),sx:{mt:2,mb:2},placeholder:"e.g. SITE-001"}),(0,W.jsx)(b.A,{fullWidth:!0,required:!0,label:"Site Name",value:L.site_name,onChange:e=>O((0,s.A)((0,s.A)({},L),{},{site_name:e.target.value})),sx:{mb:2},placeholder:"e.g. Main Factory"}),(0,W.jsx)(b.A,{fullWidth:!0,label:"Address",value:L.address,onChange:e=>O((0,s.A)((0,s.A)({},L),{},{address:e.target.value})),sx:{mb:2},placeholder:"e.g. 123 Industrial Ave"}),(0,W.jsx)(b.A,{fullWidth:!0,label:"City",value:L.city,onChange:e=>O((0,s.A)((0,s.A)({},L),{},{city:e.target.value})),sx:{mb:2},placeholder:"e.g. Houston"}),(0,W.jsx)(b.A,{fullWidth:!0,label:"Country",value:L.country,onChange:e=>O((0,s.A)((0,s.A)({},L),{},{country:e.target.value})),sx:{mb:2},placeholder:"e.g. USA"}),(0,W.jsx)(b.A,{fullWidth:!0,label:"Timezone",value:L.timezone,onChange:e=>O((0,s.A)((0,s.A)({},L),{},{timezone:e.target.value})),placeholder:"UTC",helperText:"IANA timezone (e.g. America/Chicago)"})]}),(0,W.jsxs)(S.A,{sx:{px:3,pb:2},children:[(0,W.jsx)(c.A,{onClick:()=>{V(!1),N(null)},children:"Cancel"}),(0,W.jsx)(c.A,{variant:"contained",onClick:async()=>{if(L.site_code&&L.site_name){H(!0),N(null);try{const e={site_code:L.site_code,site_name:L.site_name,timezone:L.timezone||"UTC"};L.address&&(e.address=L.address),L.city&&(e.city=L.city),L.country&&(e.country=L.country),G?(await T.Ay.patch("/sites/".concat(G),e),U('Site "'.concat(L.site_code,'" updated successfully'))):(await T.Ay.post("/sites",e),U('Site "'.concat(L.site_code,'" created successfully'))),setTimeout(()=>U(null),4e3),V(!1),O(F),B(null),await Q()}catch(n){var e,t;N((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to save site")}finally{H(!1)}}else N("Site Code and Site Name are required")},disabled:q||!L.site_code||!L.site_name,children:q?"Saving...":G?"Update Site":"Create Site"})]})]}),(0,W.jsx)(k.A,{open:!!J,title:"Delete Site",message:'Are you sure you want to delete site "'.concat(null===J||void 0===J?void 0:J.site_code,'"? This action cannot be undone.'),confirmLabel:"Delete",onConfirm:async()=>{if(J)try{await T.Ay.delete("/sites/".concat(J.id)),U('Site "'.concat(J.site_code,'" deleted successfully')),setTimeout(()=>U(null),4e3),K(null),await Q()}catch(n){var e,t;N((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to delete site"),K(null)}},onCancel:()=>K(null)})]})}},2505(e,t,n){var s=n(4994);t.A=void 0;var l=s(n(2420)),i=n(579);t.A=(0,l.default)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},3471(e,t,n){var s=n(4994);t.A=void 0;var l=s(n(2420)),i=n(579);t.A=(0,l.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},3159(e,t,n){var s=n(4994);t.A=void 0;var l=s(n(2420)),i=n(579);t.A=(0,l.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},2420(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s.createSvgIcon}});var s=n(4421)},4421(e,t,n){n.r(t),n.d(t,{capitalize:()=>l.A,createChainedFunction:()=>i,createSvgIcon:()=>a.A,debounce:()=>r.A,deprecatedPropType:()=>o,isMuiElement:()=>c.A,ownerDocument:()=>d.A,ownerWindow:()=>u.A,requirePropFactory:()=>A,setRef:()=>h,unstable_ClassNameGenerator:()=>g,unstable_useEnhancedEffect:()=>x.A,unstable_useId:()=>j.A,unsupportedProp:()=>m,useControlled:()=>v.A,useEventCallback:()=>y.A,useForkRef:()=>f.A,useIsFocusVisible:()=>C.A});var s=n(9386),l=n(6803);const i=n(2456).A;var a=n(9662),r=n(950);const o=function(e,t){return()=>null};var c=n(7328),d=n(2427),u=n(6078);const A=function(e,t){return()=>null};const h=n(6564).A;var x=n(5013),j=n(5879);const m=function(e,t,n,s,l){return null};var v=n(4516),y=n(3319),f=n(5849),C=n(3574);const g={configure:e=>{s.A.configure(e)}}}}]);
//# sourceMappingURL=114.ed19b528.chunk.js.map