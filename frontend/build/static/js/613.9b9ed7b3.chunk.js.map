{"version":3,"file":"static/js/613.9b9ed7b3.chunk.js","mappings":"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","sources":["features/predictions/pages/PredictionsPage.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport {\r\n  Container,\r\n  Typography,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Chip,\r\n  CircularProgress,\r\n  Box\r\n} from '@mui/material';\r\nimport apiClient from '../../../api/client';\r\nimport { SensorReading } from '../../../api/types';\r\nimport { useTenantContext } from '../../../contexts/TenantContext';\r\n\r\nexport default function PredictionsPage() {\r\n  const { tenantVersion } = useTenantContext();\r\n  const [predictions, setPredictions] = useState<SensorReading[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchPredictions = async () => {\r\n      try {\r\n        const response = await apiClient.get('/sensor-readings', {\r\n          params: { skip: 0, limit: 100 }\r\n        });\r\n        setPredictions(response.data.readings.filter((r: SensorReading) => r.prediction));\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error('Error fetching predictions:', error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchPredictions();\r\n    const interval = setInterval(fetchPredictions, 10000);\r\n    return () => clearInterval(interval);\r\n  }, [tenantVersion]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container maxWidth=\"xl\" sx={{ mt: 4, display: 'flex', justifyContent: 'center' }}>\r\n        <CircularProgress />\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"xl\" sx={{ mt: 4, mb: 4 }}>\r\n      <Typography variant=\"h4\" gutterBottom>ML Prediction History</Typography>\r\n      <Typography variant=\"body2\" color=\"textSecondary\" gutterBottom>\r\n        All sensor readings with ML predictions (Total: {predictions.length})\r\n      </Typography>\r\n      <TableContainer component={Paper} sx={{ mt: 3 }}>\r\n        <Table>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell><strong>Timestamp (UTC)</strong></TableCell>\r\n              <TableCell><strong>Sensor ID</strong></TableCell>\r\n              <TableCell><strong>Prediction</strong></TableCell>\r\n              <TableCell><strong>Confidence</strong></TableCell>\r\n              <TableCell><strong>Motor Temp</strong></TableCell>\r\n              <TableCell><strong>Pump Temp</strong></TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {predictions.length === 0 ? (\r\n              <TableRow>\r\n                <TableCell colSpan={6} align=\"center\">\r\n                  <Typography variant=\"body2\" color=\"textSecondary\">\r\n                    No predictions yet. Waiting for sensor data...\r\n                  </Typography>\r\n                </TableCell>\r\n              </TableRow>\r\n            ) : (\r\n              predictions.map((pred) => (\r\n                <TableRow\r\n                  key={pred._id}\r\n                  sx={{\r\n                    bgcolor: pred.prediction?.toLowerCase() !== 'normal' ? 'warning.light' : 'inherit'\r\n                  }}\r\n                >\r\n                  <TableCell>{new Date(pred.timestamp + 'Z').toLocaleString()}</TableCell>\r\n                  <TableCell>{pred.sensor_id}</TableCell>\r\n                  <TableCell>\r\n                    <Chip\r\n                      label={pred.prediction || 'Unknown'}\r\n                      color={pred.prediction?.toLowerCase() === 'normal' ? 'success' : 'error'}\r\n                      size=\"small\"\r\n                    />\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {pred.confidence != null ? (\r\n                      <Chip\r\n                        label={`${(pred.confidence * 100).toFixed(1)}%`}\r\n                        color={pred.confidence > 0.7 ? 'success' : 'warning'}\r\n                        size=\"small\"\r\n                        variant=\"outlined\"\r\n                      />\r\n                    ) : (\r\n                      'N/A'\r\n                    )}\r\n                  </TableCell>\r\n                  <TableCell>{pred.motor_data?.DE_temp?.toFixed(1) || 'N/A'}°C</TableCell>\r\n                  <TableCell>{pred.pump_data?.DE_temp?.toFixed(1) || 'N/A'}°C</TableCell>\r\n                </TableRow>\r\n              ))\r\n            )}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Container>\r\n  );\r\n}\r\n"],"names":["PredictionsPage","tenantVersion","useTenantContext","predictions","setPredictions","useState","loading","setLoading","useEffect","fetchPredictions","async","response","apiClient","get","params","skip","limit","data","readings","filter","r","prediction","error","console","interval","setInterval","clearInterval","_jsx","Container","maxWidth","sx","mt","display","justifyContent","children","CircularProgress","_jsxs","mb","Typography","variant","gutterBottom","color","length","TableContainer","component","Paper","Table","TableHead","TableRow","TableCell","TableBody","colSpan","align","map","pred","_pred$prediction","_pred$prediction2","_pred$motor_data","_pred$motor_data$DE_t","_pred$pump_data","_pred$pump_data$DE_te","bgcolor","toLowerCase","Date","timestamp","toLocaleString","sensor_id","Chip","label","size","confidence","concat","toFixed","motor_data","DE_temp","pump_data","_id"],"sourceRoot":""}